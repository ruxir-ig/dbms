-- MySQL Import/Export Demo using Command Line

-- Create Database and Table
CREATE DATABASE IF NOT EXISTS export_import_demo;
USE export_import_demo;

CREATE TABLE employees (
    emp_id INT PRIMARY KEY,
    name VARCHAR(100),
    department VARCHAR(100),
    salary DECIMAL(10,2)
);

INSERT INTO employees VALUES
    (1, 'Alice', 'HR', 45000.00),
    (2, 'Bob', 'Finance', 55000.00),
    (3, 'Charlie', 'IT', 60000.00);

-- Export to CSV File
SELECT *
INTO OUTFILE 'C:/ProgramData/MySQL/MySQL Server 8.0/Uploads/employees.csv'
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n'
FROM employees;

-- Check secure_file_priv setting
SHOW VARIABLES LIKE 'secure_file_priv';

-- Export to Text File (Tab-separated)
SELECT *
INTO OUTFILE 'C:/ProgramData/MySQL/MySQL Server 8.0/Uploads/employees.txt'
FIELDS TERMINATED BY '\t'
LINES TERMINATED BY '\n'
FROM employees;

-- Create table for importing data
CREATE TABLE employees_import (
    emp_id INT,
    name VARCHAR(100),
    department VARCHAR(100),
    salary DECIMAL(10,2)
);

-- Import from CSV File
LOAD DATA INFILE 'C:/ProgramData/MySQL/MySQL Server 8.0/Uploads/employees.csv'
INTO TABLE employees_import
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n'
IGNORE 1 LINES;

-- Import from Text File
LOAD DATA INFILE 'C:/ProgramData/MySQL/MySQL Server 8.0/Uploads/employees.txt'
INTO TABLE employees_import
FIELDS TERMINATED BY '\t'
LINES TERMINATED BY '\n';
